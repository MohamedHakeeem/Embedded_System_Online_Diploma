/**
 ******************************************************************************
 * @file           : main.c
 * @author         : Auto-generated by STM32CubeIDE
 * @brief          : Main program body
 ******************************************************************************
 * @attention
 *
 * Copyright (c) 2024 STMicroelectronics.
 * All rights reserved.
 *
 * This software is licensed under terms that can be found in the LICENSE file
 * in the root directory of this software component.
 * If no LICENSE file comes with this software, it is provided AS-IS.
 *
 ******************************************************************************
 */

#include <stm32f103x6_gpio_driver.h>
#include <stm32f103x6_exti_driver.h>
#include <STM32F103X6.h>
#include "lcd.h"
#include "keypad.h"


uint8_t IRQ_FLAG=0;

void wait_ms(uint32_t time) {
	uint32_t i, j;
	for (i = 0; i < time; i++)
		for (j = 0; j < 255; j++)
			;
}

void EXTI9_CALLBACK(void)
{
	IRQ_FLAG = 1;
	LCD_WRITE_STRING("IRQ_EXTI9_IS_HAPPENED^____^");
	wait_ms(1000);
}



int main(void)
{



	//Initialization...............
	MCAL_GPIO_Enable_ClocK(GPIOA);
	MCAL_GPIO_Enable_ClocK(GPIOB);
	AFIO_CLOCK_ENABLE;


	LCD_INIT();
	LCD_clear_screen();



	//EXTI_CONFIGURATINO.................
	EXTI_PINCONFIG_t  EXTIx_Confg;
	EXTIx_Confg.EXTI_Map_Pin = EXTI9PB9;
	EXTIx_Confg.EXTI_Trigger_State=EXTI_Rising_Trigger;
	EXTIx_Confg.PF_IRQ_CALLBACK=EXTI9_CALLBACK;
	EXTIx_Confg.IRQ_EN=EXTI_IRQ_ENABLE;

	MCAL_EXTI_Init(&EXTIx_Confg);

	IRQ_FLAG = 1;
	while(1)
	{
		if(IRQ_FLAG)
		{
			LCD_clear_screen();
			IRQ_FLAG = 0;

		}


	}

}

